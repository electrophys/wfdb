file: INSTALL			G. Moody	30 January 2000
				Last revised:	  19 May 2022
WFDB Software Package installation notes

These notes are infrequently updated, but are included here for those who may
not have ready access to the World Wide Web.  For those who do, please visit
PhysioNet, where up-to-date quick-start guides including installation notes
for popular operating systems are available (find a guide for your platform at
http://physionet.org/physiotools/wfdb.shtml).

Although ready-to-run binaries are available for several popular platforms,
we strongly recommend building the WFDB Software Package from sources.  Doing
so is the best way to ensure that the components of the package will work
together properly on your system, and that your software is up-to-date.  The
process of building the package is simple and quick.  

The GNU C compiler (gcc) is available freely for all platforms, and it is
strongly recommended.  We will help you to solve any problems you may encounter
in building the WFDB Software Package using gcc on your platform; our
experience has been that such builds are trouble-free if you follow the
instructions in our quick-start guides (see above).

Some users have reported success in compiling the WFDB Software Package, except
for WAVE, using various commercial compilers.  We don't use or recommend these
compilers, and we offer no instructions or support for doing so whatsoever.  If
you choose to use one of these unsupported compilers, you are on your own!

PREPARATION

The following are required for a complete build.  All are free, open-source
software available for all popular platforms:

 * Software development tools (gcc, meson, ninja, standard C header files)

 * The libcurl library (including *.h files)

 * The libFLAC library (including *.h files)

 * The expat XML parser library (including *.h files) -- needed for the
   XML tools (xmlann, xmlhea); annxml and heaxml are built without it

On Debian, Ubuntu, or similar operating systems, open a terminal and run the
command:
	sudo apt-get install gcc meson ninja-build \
	  libcurl4-gnutls-dev libflac-dev libexpat1-dev

On Fedora, Red Hat, or similar operating systems, open a terminal and run the
command:
	sudo dnf install gcc meson ninja-build \
	  libcurl-devel flac-devel expat-devel

On Mac OS X, install Homebrew (https://brew.sh/), and run the command:
	brew install flac

On MS-Windows, install WSL (Windows Subsystem for Linux) by running
"wsl --install" in an administrator PowerShell or Command Prompt.  Then
install the build prerequisites within the WSL distribution (e.g. Ubuntu)
using the apt-get command shown above.

On other GNU/Linux or Unix-like operating systems, if these packages are not
included in your distribution's package manager, you may need to compile and
install them yourself:
	https://xiph.org/flac/
	https://curl.se/

Detailed instructions for obtaining and installing these prerequisites are
included in the WFDB quick-start guides for the popular platforms (see above).
Meson and Ninja are also available via pip (`pip install meson ninja`)
if your system packages are too old.


BUILDING AND INSTALLING

Once you have installed the necessary prerequisites, the WFDB installation
process is the same on all platforms:

1. Open a terminal emulator window and navigate to the top-level directory
   of the WFDB sources (the directory that contains this file).

2. Configure the package by typing:
	meson setup build
   To install to a non-default location (if you don't have root permissions),
   use the --prefix option:
	meson setup build --prefix=/some/writable/directory

3. Build and install the WFDB library and applications by typing:
	ninja -C build install

4. Test the installation by typing:
	meson test -C build
   If there are any errors, look in the build/meson-logs directory for details.


MESON OPTIONS

The build can be customized with Meson options:

	meson setup build -Doption=value

Available WFDB options:

  netfiles=auto|enabled|disabled  HTTP/FTP support via libcurl
  flac=auto|enabled|disabled      FLAC signal compression
  expat=auto|enabled|disabled     XML tools (annxml, heaxml, xmlann, xmlhea)
  wave=auto|enabled|disabled      WAVE viewer (requires GTK 3 and VTE)
  docs=auto|enabled|disabled      HTML documentation (requires mandoc/asciidoctor)
  dbdir=PATH                      Database directory (default: datadir/wfdb)

Options set to "auto" (the default) are enabled when the required libraries
are found and silently disabled otherwise.  Set to "enabled" to make a
missing library a hard error.


BUILDING PACKAGES

The source tree includes packaging metadata for Debian/Ubuntu, Fedora/RHEL,
and macOS Homebrew.  These produce installable system packages rather than
a bare "make install".

Debian / Ubuntu (.deb)

  Install the build dependencies:
	sudo apt-get install build-essential debhelper-compat meson ninja-build \
	  pkg-config libcurl4-gnutls-dev libexpat1-dev libflac-dev \
	  libgtk-3-dev libvte-2.91-dev

  Build the packages from the source directory:
	dpkg-buildpackage -us -uc

  The .deb files are created in the parent directory.  The build produces
  four packages:
    libwfdb10       shared library
    libwfdb-dev     headers, static library, pkg-config file
    wfdb-tools      command-line applications
    wave            WAVE viewer and companion tools

  Install them with:
	sudo dpkg -i ../libwfdb10_*.deb ../libwfdb-dev_*.deb \
	  ../wfdb-tools_*.deb ../wave_*.deb

Fedora / RHEL (.rpm)

  Install the build dependencies:
	sudo dnf install gcc meson ninja-build \
	  libcurl-devel expat-devel flac-devel \
	  gtk3-devel vte291-devel rpm-build

  Create a source tarball and build RPMs:
	tar czf wfdb-10.7.0.tar.gz --transform='s,^,wfdb-10.7.0/,' \
	  --exclude=build --exclude=.git .
	rpmbuild -ta wfdb-10.7.0.tar.gz

  The RPMs are placed under ~/rpmbuild/RPMS/.  The build produces four
  subpackages:
    wfdb            command-line applications and data files
    wfdb-libs       shared library
    wfdb-devel      headers, static library, pkg-config file
    wave            WAVE viewer and companion tools

macOS Homebrew

  A Homebrew formula is provided in wfdb.rb.  To install from a local
  copy of the source tree:
	brew install --formula wfdb.rb

  The formula builds without WAVE (which requires GTK 3) and without
  documentation.  It enables libcurl, FLAC, and expat support.


FURTHER READING

Once you have successfully compiled and installed the WFDB Software Package,
you will find a great deal of information about using it on PhysioNet;  begin
by looking in http://physionet.org/physiotools/manuals.shtml.

Many frequently asked questions about this software are answered in the
PhysioNet FAQ (http://physionet.org/faq.shtml).


UNINSTALLING

If for any reason you wish to uninstall the WFDB Software Package, type:
	ninja -C build uninstall
from this directory.  You will need root permissions to uninstall unless
you used a --prefix within your home directory.
